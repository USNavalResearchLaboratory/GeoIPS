
all:
	@if [[ -v GEOIPS && -d ${GEOIPS} ]]; then \
		echo "STANDALONE_GEOIPS:     ${STANDALONE_GEOIPS}";\
		echo "GEOIPS:                ${GEOIPS}";\
		echo "EXTERNAL_GEOIPS:       ${EXTERNAL_GEOIPS}";\
		while [ -z "$$CONTINUE" ]; do \
			read -r -p "Y or y to CONTINUE with GeoIPS build, affecting above paths. If paths are incorrect, source appropriate config_bash setup file. [y/N]: " CONTINUE; \
		done ; \
		if [ $$CONTINUE != "y" ] && [ $$CONTINUE != "Y" ]; then \
			echo "Exiting. Please source appropriate config to set build environment."; exit 1; \
		fi; \
		python remove_links.py all; \
		python create_links.py; \
		python setup.py bdist_wheel; \
		make clean -C geoips; \
		make -C geoips; \
	elif [[ -v GEOIPS ]]; then \
		echo "GEOIPS ${GEOIPS} directory does not exist, not attempting to link and build geoips"; \
	else \
		echo "GEOIPS environment variable not set, not attempting to link and build geoips"; \
	fi
		
